!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("rxjs/operator/combineLatest"),require("@angular/core"),require("angular2-modal"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","rxjs/operator/combineLatest","@angular/core","angular2-modal","@angular/common"],n):n((t.angular2Modal=t.angular2Modal||{},t.angular2Modal.vex=t.angular2Modal.vex||{}),t.Rx.Observable.prototype,t.ng.core,t.angular2Modal,t.ng.common)}(this,function(t,n,o,e,r){"use strict";var a=function(){function t(){this.onButtonClick=new o.EventEmitter}return t.prototype.onClick=function(t,n){n.stopPropagation(),this.onButtonClick.emit({btn:t,$event:n})},t.decorators=[{type:o.Component,args:[{selector:"vex-dialog-buttons",encapsulation:o.ViewEncapsulation.None,template:'<div class="vex-dialog-buttons">\n    <button type="button" \n         *ngFor="let btn of buttons;"\n         [class]="btn.cssClass"\n         (click)="onClick(btn, $event)">{{btn.caption}}</button>\n</div>'}]}],t.ctorParameters=function(){return[]},t.propDecorators={buttons:[{type:o.Input}],onButtonClick:[{type:o.Output}]},t}(),i=function(){function t(t){this.dialog=t,this.context=t.context}return t.prototype.onButtonClick=function(t){t.btn.onClick(this,t.$event)},t.decorators=[{type:o.Component,args:[{selector:"modal-dialog",encapsulation:o.ViewEncapsulation.None,template:'<form class="vex-dialog-form">\n    <ng-container *ngComponentOutlet="context.content"></ng-container>\n    <vex-dialog-buttons [buttons]="context.buttons"\n                        (onButtonClick)="onButtonClick($event)"></vex-dialog-buttons>\n</form>'}]}],t.ctorParameters=function(){return[{type:e.DialogRef}]},t}(),s=function(){function t(t){this.dialog=t,this.context=t.context}return t.decorators=[{type:o.Component,args:[{selector:"drop-in-dialog",encapsulation:o.ViewEncapsulation.None,template:'<div class="vex-dialog-message">{{context.message}}</div>\n <div *ngIf="context.showInput" class="vex-dialog-input">\n   <input #input\n          autofocus\n          name="vex" \n          type="text" \n          class="vex-dialog-prompt-input"\n           (change)="context.defaultResult = input.value" \n          placeholder="{{context.placeholder}}">\n </div>\n <div *ngIf="context.showCloseButton" \n      [class]="context.closeClassName"\n      (click)="dialog.dismiss()"></div>'}]}],t.ctorParameters=function(){return[{type:e.DialogRef}]},t}(),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),l={className:"default",overlayClassName:"vex-overlay",contentClassName:"vex-content",closeClassName:"vex-close"},u=["className","overlayClassName","contentClassName","closeClassName","showCloseButton"],p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.normalize=function(){this.className||(this.className=l.className),this.overlayClassName||(this.overlayClassName=l.overlayClassName),this.contentClassName||(this.contentClassName=l.contentClassName),this.closeClassName||(this.closeClassName=l.closeClassName),t.prototype.normalize.call(this)},n}(e.ModalOpenContext),d=function(t){function n(n,o,r){return void 0===n&&(n=void 0),void 0===o&&(o=void 0),void 0===r&&(r=void 0),t.call(this,e.extend(l,n||{}),e.arrayUnion(u,o||[]),r||p)||this}return c(n,t),n.prototype.overlayClosesOnClick=function(t){return this[e.privateKey("isBlocking")]=!t,this},n}(e.ModalOpenContextBuilder),f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),m=["content"],y=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return f(n,t),n}(p),v=function(t){function n(n,o,r,a){return void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),t.call(this,e.extend({modal:n,component:i,buttons:[],defaultResult:!0},o||{}),e.arrayUnion(m,r||[]),a||y)||this}return f(n,t),n.prototype.addButton=function(t,n,o){var r={cssClass:t,caption:n,onClick:o};return this[e.privateKey("buttons")].push(r),this},n.prototype.addOkButton=function(t){return void 0===t&&(t="OK"),this.addButton("vex-dialog-button-primary vex-dialog-button vex-first",t,function(t,n){return t.dialog.close(t.dialog.context.defaultResult)}),this},n.prototype.addCancelButton=function(t){return void 0===t&&(t="CANCEL"),this.addButton("vex-dialog-button-secondary vex-dialog-button vex-last",t,function(t,n){return t.dialog.dismiss()}),this},n}(d),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),g={component:i,content:s,okBtn:"OK",cancelBtn:"Cancel"},x=["okBtn","cancelBtn","placeholder"],C=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return h(n,t),Object.defineProperty(n.prototype,"showInput",{get:function(){return this.dropInType===e.DROP_IN_TYPE.prompt},enumerable:!0,configurable:!0}),n}(y),b=function(t){function n(n,o,r){return void 0===r&&(r=void 0),t.call(this,n,e.extend(e.extend({modal:n,dropInType:o},g),r||{}),x,C)||this}return h(n,t),n.prototype.$$beforeOpen=function(n){switch(n.okBtn&&this.addOkButton(n.okBtn),n.dropInType){case e.DROP_IN_TYPE.prompt:n.defaultResult=void 0;case e.DROP_IN_TYPE.confirm:n.cancelBtn&&this.addCancelButton(n.cancelBtn)}return t.prototype.$$beforeOpen.call(this,n)},n}(v),_=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),O=!("undefined"==typeof document||!document),N=function(t){function r(n){return t.call(this,n)||this}return _(r,t),r.prototype.alert=function(){return new b(this,e.DROP_IN_TYPE.alert,{isBlocking:!1})},r.prototype.prompt=function(){return new b(this,e.DROP_IN_TYPE.prompt,{isBlocking:!0,keyboard:null})},r.prototype.confirm=function(){return new b(this,e.DROP_IN_TYPE.confirm,{isBlocking:!0,keyboard:null})},r.prototype.create=function(t,o,r){var a=this,i=this.createBackdrop(t,e.CSSBackdrop),s=this.createContainer(t,e.CSSDialogContainer,o,r),c=t.overlayRef.instance,l=i.instance,u=s.instance;return t.inElement?c.insideElement():c.fullscreen(),O&&!document.body.classList.contains("vex-open")&&document.body.classList.add("vex-open"),c.addClass("vex vex-theme-"+t.context.className),l.addClass("vex-overlay"),u.addClass(t.context.contentClassName),u.setStyle("display","block"),t.inElement&&(c.setStyle("padding","0"),u.setStyle("margin-top","20px")),s.location.nativeElement&&s.location.nativeElement.focus(),"bottom-right-corner"===t.context.className&&(c.setStyle("overflow-y","hidden"),u.setStyle("position","absolute")),c.beforeDestroy(function(){c.addClass("vex-closing");var o=new e.PromiseCompleter,r=u.myAnimationEnd$();return"bottom-right-corner"!==t.context.className&&(r=n.combineLatest.call(r,l.myAnimationEnd$(),function(t,n){return[t,n]})),r.subscribe(function(n){O&&1===a.overlay.groupStackLength(t)&&document.body.classList.remove("vex-open"),o.resolve()}),o.promise}),c.setClickBoundary(s.location.nativeElement),t},r.decorators=[{type:o.Injectable}],r.ctorParameters=function(){return[{type:e.Overlay}]},r}(e.Modal),B=[{provide:e.Modal,useClass:N},{provide:N,useClass:N}],P=function(){function t(){}return t.getProviders=function(){return B},t.decorators=[{type:o.NgModule,args:[{imports:[e.ModalModule,r.CommonModule],declarations:[a,s,i],providers:B,entryComponents:[i,s]}]}],t.ctorParameters=function(){return[]},t}();t.Modal=N,t.VEXModalContext=p,t.VEXModalContextBuilder=d,t.DropInPreset=C,t.DropInPresetBuilder=b,t.DialogFormModal=i,t.FormDropIn=s,t.VEXDialogButtons=a,t.DialogPreset=y,t.DialogPresetBuilder=v,t.VexModalModule=P,t.providers=B,Object.defineProperty(t,"__esModule",{value:!0})});